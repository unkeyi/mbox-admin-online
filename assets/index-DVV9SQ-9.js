var Je=Object.defineProperty,Ze=Object.defineProperties;var Qe=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var fe=(e,n,c)=>n in e?Je(e,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[n]=c,M=(e,n)=>{for(var c in n||(n={}))et.call(n,c)&&fe(e,c,n[c]);if(he)for(var c of he(n))tt.call(n,c)&&fe(e,c,n[c]);return e},ye=(e,n)=>Ze(e,Qe(n));var pe=(e,n,c)=>new Promise((x,k)=>{var S=p=>{try{s(c.next(p))}catch(v){k(v)}},l=p=>{try{s(c.throw(p))}catch(v){k(v)}},s=p=>p.done?x(p.value):Promise.resolve(p.value).then(S,l);s((c=c.apply(e,n)).next())});import{aq as nt,d as se,f as G,ah as lt,c as N,w as j,Z as I,_ as U,u as i,ae as at,ab as O,a8 as te,a9 as V,G as ke,a0 as ge,a1 as xe,k as g,F as X,aa as ct,ac as Fe,B as st,l as Se,o as Ie,y as rt,b as Ne,i as Me,x as it,g as ot,r as ve,J as q,h as H,m as be,A as Ke}from"./vue-2VIvd4_n.js";import{aW as ut,b as dt,aC as ht,m as J,A as ft,aX as Ce,aY as yt,aw as pt,aZ as kt,aF as gt,a_ as xt,aR as Le,S as St,ap as Ae}from"./entry/index-CFS-oRkL.js";import{aU as vt,aV as bt,aW as Kt,aX as Ct,aY as Lt,w as z,D as At,l as mt,f as ae,a3 as _t,aZ as Et,o as Tt,e as ne,F as wt,aG as Bt,aE as me,ad as Dt,v as Ft,U as _e}from"./antd-DYfcSfab.js";function ce(e,n){return n?typeof n=="string"?` ${e}--${n}`:Array.isArray(n)?n.reduce((c,x)=>c+ce(e,x),""):Object.keys(n).reduce((c,x)=>c+(n[x]?ce(e,x):""),""):""}function It(e){return(n,c)=>(n&&typeof n!="string"&&(c=n,n=""),n=n?`${e}__${n}`:e,`${n}${ce(n,c)}`)}function $e(e){return[It(`${ut}-${e}`)]}const Ee=Symbol(),Te=Symbol();function Nt(e,n){if(!bt(e)||e[Te])return e;const{values:c,required:x,default:k,type:S,validator:l}=e,s=c||l?p=>{let v=!1,K=[];if(c&&(K=[...c,k],v||(v=K.includes(p))),l&&(v||(v=l(p))),!v&&K.length>0){const d=[...new Set(K)].map(f=>JSON.stringify(f)).join(", ");nt(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${d}], got value ${JSON.stringify(p)}.`)}return v}:void 0;return{type:typeof S=="object"&&Object.getOwnPropertySymbols(S).includes(Ee)&&S?S[Ee]:S,required:!!x,default:k,validator:s,[Te]:!0}}const Mt=e=>vt(Object.entries(e).map(([n,c])=>[n,Nt(c,n)]));var E=(e=>(e[e.SELECT_ALL=0]="SELECT_ALL",e[e.UN_SELECT_ALL=1]="UN_SELECT_ALL",e[e.EXPAND_ALL=2]="EXPAND_ALL",e[e.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",e[e.CHECK_STRICTLY=4]="CHECK_STRICTLY",e[e.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY",e))(E||{});const $t=["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],Ot=Mt({value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:Boolean,search:Boolean,searchValue:{type:String,default:""},checkStrictly:Boolean,clickRowToExpand:{type:Boolean,default:!1},checkable:Boolean,defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:Boolean,fieldNames:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:[Array,Object],default:()=>[]},beforeRightClick:{type:Function,default:void 0},rightMenuList:{type:Array},filterFn:{type:Function,default:void 0},highlight:{type:[Boolean,String],default:!1},expandOnSearch:Boolean,checkOnSearch:Boolean,selectedOnSearch:Boolean,loading:{type:Boolean,default:!1},treeWrapperClassName:String}),jt={key:2,class:"flex items-center flex-1 cursor-pointer justify-self-stretch"},Pt=se({__name:"TreeHeader",props:{helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},searchText:{type:String,default:""},checkAll:{type:Function,default:void 0},expandAll:{type:Function,default:void 0}},emits:["strictly-change","search"],setup(e,{emit:n}){const c=G(""),[x]=$e("tree-header"),k=e,S=n,l=lt(),{t:s}=dt(),p=N(()=>["mr-1","w-full",{"ml-5":l.headerTitle||k.title}]),v=N(()=>{const{checkable:t}=k,r=[{label:s("component.tree.expandAll"),value:E.EXPAND_ALL},{label:s("component.tree.unExpandAll"),value:E.UN_EXPAND_ALL,divider:t}];return t?[{label:s("component.tree.selectAll"),value:E.SELECT_ALL},{label:s("component.tree.unSelectAll"),value:E.UN_SELECT_ALL,divider:t},...r,{label:s("component.tree.checkStrictly"),value:E.CHECK_STRICTLY},{label:s("component.tree.checkUnStrictly"),value:E.CHECK_UN_STRICTLY}]:r}),K=({key:t})=>{var r,o,h,u;switch(t){case E.SELECT_ALL:(r=k.checkAll)==null||r.call(k,!0);break;case E.UN_SELECT_ALL:(o=k.checkAll)==null||o.call(k,!1);break;case E.EXPAND_ALL:(h=k.expandAll)==null||h.call(k,!0);break;case E.UN_EXPAND_ALL:(u=k.expandAll)==null||u.call(k,!1);break;case E.CHECK_STRICTLY:S("strictly-change",!1);break;case E.CHECK_UN_STRICTLY:S("strictly-change",!0);break}};function d(t){S("search",t)}const f=ft(d,200);return j(()=>c.value,t=>{f(t)}),j(()=>k.searchText,t=>{t!==c.value&&(c.value=t)}),(t,r)=>(I(),U("div",{class:xe([i(x)(),"flex mb-1 px-2 py-1.5 items-center"])},[i(l).headerTitle?at(t.$slots,"headerTitle",{key:0}):O("",!0),!i(l).headerTitle&&t.title?(I(),te(i(ht),{key:1,helpMessage:t.helpMessage},{default:V(()=>[ke(ge(t.title),1)]),_:1},8,["helpMessage"])):O("",!0),t.search||t.toolbar?(I(),U("div",jt,[t.search?(I(),U("div",{key:0,class:xe(p.value)},[g(i(Kt),{placeholder:i(s)("common.searchText"),size:"small",allowClear:"",value:c.value,"onUpdate:value":r[0]||(r[0]=o=>c.value=o)},null,8,["placeholder","value"])],2)):O("",!0),t.toolbar?(I(),te(i(At),{key:1,onClick:r[1]||(r[1]=st(()=>{},["prevent"]))},{overlay:V(()=>[g(i(z),{onClick:K},{default:V(()=>[(I(!0),U(X,null,ct(v.value,o=>(I(),U(X,{key:o.value},[g(i(Ct),Fe({ref_for:!0},{key:o.value}),{default:V(()=>[ke(ge(o.label),1)]),_:2},1040),o.divider?(I(),te(i(Lt),{key:0})):O("",!0)],64))),128))]),_:1})]),default:V(()=>[g(J,{icon:"ion:ellipsis-vertical"})]),_:1})):O("",!0)])):O("",!0)],2))}}),Ut=({icon:e})=>e?mt(e)?Se(J,{icon:e,class:"mr-2"}):Se(J):null;function Vt(e,n){function c(d){const f=[],t=d||i(e),{key:r,children:o}=i(n);if(!o||!r)return f;for(let h=0;h<t.length;h++){const u=t[h];f.push(u[r]);const b=u[o];b&&b.length&&f.push(...c(b))}return f}function x(d){const f=[],t=d||i(e),{key:r,children:o}=i(n);if(!o||!r)return f;for(let h=0;h<t.length;h++){const u=t[h];u.disabled!==!0&&u.selectable!==!1&&f.push(u[r]);const b=u[o];b&&b.length&&f.push(...x(b))}return f}function k(d,f){const t=[],r=f||i(e),{key:o,children:h}=i(n);if(!h||!o)return t;for(let u=0;u<r.length;u++){const b=r[u],_=b[h];d===b[o]?(t.push(b[o]),_&&_.length&&t.push(...c(_))):_&&_.length&&t.push(...k(d,_))}return t}function S(d,f,t){if(!d)return;const r=t||i(e),{key:o,children:h}=i(n);if(!(!h||!o))for(let u=0;u<r.length;u++){const b=r[u],_=b[h];if(b[o]===d){r[u]=M(M({},r[u]),f);break}else _&&_.length&&S(d,f,b[h])}}function l(d=1,f,t=1){if(!d)return[];const r=[],o=f||i(e)||[];for(let h=0;h<o.length;h++){const u=o[h],{key:b,children:_}=i(n),Z=b?u[b]:"",P=_?u[_]:[];r.push(Z),P&&P.length&&t<d&&(t+=1,r.push(...l(d,P,t)))}return r}function s({parentKey:d=null,node:f,push:t="push"}){const r=ae(i(e));if(!d){r[t](f),e.value=r;return}const{key:o,children:h}=i(n);!h||!o||(Ce(r,u=>{if(u[o]===d)return u[h]=u[h]||[],u[h][t](f),!0}),e.value=r)}function p({parentKey:d=null,list:f,push:t="push"}){const r=ae(i(e));if(!(!f||f.length<1))if(d){const{key:o,children:h}=i(n);if(!h||!o)return;Ce(r,u=>{if(u[o]===d){u[h]=u[h]||[];for(let b=0;b<f.length;b++)u[h][t](f[b]);return e.value=r,!0}})}else{for(let o=0;o<f.length;o++)r[t](f[o]);e.value=r;return}}function v(d,f){if(!d)return;const t=f||i(e),{key:r,children:o}=i(n);if(!(!o||!r))for(let h=0;h<t.length;h++){const u=t[h],b=u[o];if(u[r]===d){t.splice(h,1);break}else b&&b.length&&v(d,u[o])}}function K(d,f,t){if(!d&&d!==0)return null;const r=f||i(e),{key:o,children:h}=i(n);return o?(r.forEach(u=>{if(t!=null&&t.key||(t==null?void 0:t.key)===0)return t;if(u[o]===d){t=u;return}u[h]&&u[h].length&&(t=K(d,u[h],t))}),t||null):null}return{deleteNodeByKey:v,insertNodeByKey:s,insertNodesByKey:p,filterByLevel:l,updateNodeByKey:S,getAllKeys:c,getChildrenKeys:k,getEnabledKeys:x,getSelectedNode:K}}function Ht(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Me(e)}const le="context-menu",Xt={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},we=e=>{const{item:n}=e;return g("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,n)},[e.showIcon&&n.icon&&g(J,{class:"mr-2",icon:n.icon},null),g("span",null,[n.label])])},Yt=se({name:"ContextMenu",props:Xt,setup(e){const n=G(null),c=G(!1),x=N(()=>{const{axis:l,items:s,styles:p,width:v}=e,{x:K,y:d}=l||{x:0,y:0},f=(s||[]).length*40,t=v,r=document.body,o=r.clientWidth<K+t?K-t:K,h=r.clientHeight<d+f?d-f:d;return M({position:"absolute",width:`${v}px`,left:`${o+1}px`,top:`${h+1}px`,zIndex:9999},p)});Ie(()=>{rt(()=>c.value=!0)}),Ne(()=>{const l=i(n);l&&document.body.removeChild(l)});function k(l,s){const{handler:p,disabled:v}=l;v||(c.value=!1,s==null||s.stopPropagation(),s==null||s.preventDefault(),p==null||p())}function S(l){return l.filter(p=>!p.hidden).map(p=>{const{disabled:v,label:K,children:d,divider:f=!1}=p,t={item:p,handler:k,showIcon:e.showIcon};return!d||d.length===0?g(X,null,[g(z.Item,{disabled:v,class:`${le}__item`,key:K},{default:()=>[g(we,t,null)]}),f?g(_t,{key:`d-${K}`},null):null]):i(c)?g(z.SubMenu,{key:K,disabled:v,popupClassName:`${le}__popup`},{title:()=>g(we,t,null),default:()=>S(d)}):null})}return()=>{let l;if(!i(c))return null;const{items:s}=e;return g(z,{inlineIndent:12,mode:"vertical",class:le,ref:n,style:i(x)},Ht(l=S(s))?l:{default:()=>[l]})}}}),$={domList:[],resolve:()=>{}},Rt=function(e){const{event:n}=e||{};if(n&&(n==null||n.preventDefault()),!!yt)return new Promise(c=>{const x=document.body,k=document.createElement("div"),S={};e.styles&&(S.styles=e.styles),e.items&&(S.items=e.items),e.event&&(S.customEvent=n,S.axis={x:n.clientX,y:n.clientY+x.scrollTop});const l=g(Yt,S);it(l,k);const s=function(){$.resolve("")};$.domList.push(k);const p=function(){$.domList.forEach(v=>{try{v&&x.removeChild(v)}catch(K){}}),x.removeEventListener("click",s),x.removeEventListener("scroll",s)};$.resolve=function(v){p(),c(v)},p(),x.appendChild(k),x.addEventListener("click",s),x.addEventListener("scroll",s)})},Be=function(){$&&($.resolve(""),$.domList=[])};function Wt(e=!0){return ot()&&e&&Ne(()=>{Be()}),[Rt,Be]}function De(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Me(e)}const Zt=se({name:"BasicTree",inheritAttrs:!1,props:Ot,emits:$t,setup(e,{attrs:n,slots:c,emit:x,expose:k}){const[S]=$e("tree"),l=ve({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),s=ve({startSearch:!1,searchText:"",searchData:[]}),p=G([]),[v]=Wt(),K=N(()=>{const{fieldNames:a}=e;return M({children:"children",title:"title",key:"key"},a)}),d=N(()=>{let a=ye(M(M({blockNode:!0},n),e),{expandedKeys:l.expandedKeys,selectedKeys:l.selectedKeys,checkedKeys:l.checkedKeys,checkStrictly:l.checkStrictly,fieldNames:i(K),"onUpdate:expandedKeys":y=>{l.expandedKeys=y,x("update:expandedKeys",y)},"onUpdate:selectedKeys":y=>{l.selectedKeys=y,x("update:selectedKeys",y)},onCheck:(y,L)=>{let C=q(l.checkedKeys);if(pt(C)&&s.startSearch){const m=L.node.eventKey;C=Et(C,Z(m)),L.checked&&C.push(m),l.checkedKeys=C}else l.checkedKeys=y;const A=q(l.checkedKeys);x("update:value",A),x("check",A,L)},onRightClick:Pe});return Tt(a,"treeData","class")}),f=N(()=>s.startSearch?s.searchData:i(p)),t=N(()=>!f.value||f.value.length===0),{deleteNodeByKey:r,insertNodeByKey:o,insertNodesByKey:h,filterByLevel:u,updateNodeByKey:b,getAllKeys:_,getChildrenKeys:Z,getEnabledKeys:P,getSelectedNode:Oe}=Vt(p,K);function je(a,y){return!y&&e.renderIcon&&ne(e.renderIcon)?e.renderIcon(a):y}function Pe(L){return pe(this,arguments,function*({event:a,node:y}){var D;const{rightMenuList:C=[],beforeRightClick:A}=e;let m={event:a,items:[]};if(A&&ne(A)){let T=yield A(y,a);Array.isArray(T)?m.items=T:Object.assign(m,T)}else m.items=C;(D=m.items)!=null&&D.length&&(m.items=m.items.filter(T=>!T.hidden),v(m))})}function Ue(){return i(p)}function Y(a){l.expandedKeys=a}function Ve(){return l.expandedKeys}function re(a){l.selectedKeys=a}function He(){return l.selectedKeys}function ie(a){l.checkedKeys=a}function Xe(){return l.checkedKeys}function oe(a){l.checkedKeys=a?P():[]}function Q(a){l.expandedKeys=a?_():[]}function Ye(a){l.checkStrictly=a}j(()=>e.searchValue,a=>{a!==s.searchText&&(s.searchText=a)},{immediate:!0}),j(()=>e.treeData,a=>{a&&ee(s.searchText)});function ee(a){if(a!==s.searchText&&(s.searchText=a),x("update:searchValue",a),!a){s.startSearch=!1;return}const{filterFn:y,checkable:L,expandOnSearch:C,checkOnSearch:A,selectedOnSearch:m}=i(e);s.startSearch=!0;const{title:D,key:T}=i(K),B=[];if(s.searchData=kt(i(p),w=>{var R,W;const F=y?y(a,w,i(K)):(W=(R=w[D])==null?void 0:R.includes(a))!=null?W:!1;return F&&B.push(w[T]),F},i(K)),C){const w=gt(s.searchData).map(F=>F[T]);w&&w.length&&Y(w)}A&&L&&B.length&&ie(B),m&&B.length&&re(B)}function Re(a,y){if(!(!e.clickRowToExpand||!y||y.length===0))if(!l.expandedKeys.includes(a))Y([...l.expandedKeys,a]);else{const L=[...l.expandedKeys],C=L.findIndex(A=>A===a);C!==-1&&L.splice(C,1),Y(L)}}H(()=>{p.value=e.treeData}),Ie(()=>{const a=parseInt(e.defaultExpandLevel);a>0?l.expandedKeys=u(a):e.defaultExpandAll&&Q(!0)}),H(()=>{l.expandedKeys=e.expandedKeys}),H(()=>{l.selectedKeys=e.selectedKeys}),H(()=>{l.checkedKeys=e.checkedKeys}),j(()=>e.value,()=>{l.checkedKeys=q(e.value||[])},{immediate:!0}),j(()=>l.checkedKeys,()=>{const a=q(l.checkedKeys);x("update:value",a),x("change",a)}),H(()=>{l.checkStrictly=e.checkStrictly});const We={getTreeData:Ue,setExpandedKeys:Y,getExpandedKeys:Ve,setSelectedKeys:re,getSelectedKeys:He,setCheckedKeys:ie,getCheckedKeys:Xe,insertNodeByKey:o,insertNodesByKey:h,deleteNodeByKey:r,updateNodeByKey:b,getSelectedNode:Oe,checkAll:oe,expandAll:Q,filterByLevel:a=>{l.expandedKeys=u(a)},setSearchValue:a=>{ee(a)},getSearchValue:()=>s.searchText};function qe(a){const{actionList:y}=e;if(!(!y||y.length===0))return y.map((L,C)=>{var m;let A=!0;return ne(L.show)?A=(m=L.show)==null?void 0:m.call(L,a):_e(L.show)&&(A=L.show),A?g("span",{key:C,class:S("action")},[L.render(a)]):null})}const ze=N(()=>{const a=ae(f.value);return xt(a,(y,L)=>{var de;const C=s.searchText,{highlight:A}=i(e),{title:m,key:D,children:T}=i(K),B=je(y,y.icon),w=Dt(y,m),F=C?w.indexOf(C):-1,R=s.startSearch&&!Ft(C)&&A&&F!==-1,W=`color: ${_e(A)?"#f50":A}`,Ge=R?g("span",{class:(de=i(d))!=null&&de.blockNode?`${S("content")}`:""},[g("span",null,[w.substr(0,F)]),g("span",{style:W},[C]),g("span",null,[w.substr(F+C.length)])]):w,ue=B?g(Ut,{icon:B},null):c.icon?g("span",{class:"mr-2"},[Ae(c,"icon")]):null;return y[m]=g("span",{class:`${S("title")}`,onClick:Re.bind(null,y[D],y[T])},[c!=null&&c.title?g(X,null,[ue,Ae(c,"title",y)]):g(X,null,[ue,Ge,g("span",{class:S("actions")},[qe(y)])])]),y}),a});return k(We),()=>{let a,y;const{title:L,helpMessage:C,toolbar:A,search:m,checkable:D}=e,T=L||A||m||c.headerTitle,B={height:"calc(100% - 38px)"};return g("div",{class:[S(),"h-full",n.class]},[T&&g(Pt,{checkable:D,checkAll:oe,expandAll:Q,title:L,search:m,toolbar:A,helpMessage:C,onStrictlyChange:Ye,onSearch:ee,searchText:s.searchText},De(a=Le(c))?a:{default:()=>[a]}),g(wt,{wrapperClassName:i(e.treeWrapperClassName),spinning:i(e.loading),tip:"加载中..."},{default:()=>[be(g(St,{style:B},{default:()=>[g(Bt,Fe(i(d),{showIcon:!1,treeData:ze.value}),De(y=Le(c,["title"]))?y:{default:()=>[y]})]}),[[Ke,!i(t)]]),be(g(me,{image:me.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[Ke,i(t)]])]})])}}});export{Zt as _};
