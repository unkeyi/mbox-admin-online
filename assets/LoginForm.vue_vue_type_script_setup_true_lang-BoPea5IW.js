var E=(b,r,i)=>new Promise((u,v)=>{var o=l=>{try{m(i.next(l))}catch(f){v(f)}},k=l=>{try{m(i.throw(l))}catch(f){v(f)}},m=l=>l.done?u(l.value):Promise.resolve(l.value).then(o,k);m((i=i.apply(b,r)).next())});import{d as A,f as S,r as N,c as O,u as e,Z as P,_ as U,m as L,A as T,k as s,a9 as t,G as d,a0 as c,ao as h,F as G}from"./vue-2VIvd4_n.js";import{u as V,a as q,b as K,L as p,_ as Q}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-CGyctQSw.js";import{b as W,f as Z,ae as j,ai as H}from"./entry/index-CFS-oRkL.js";import{a5 as $,A as B,a6 as J,B as y,a7 as X,a8 as Y}from"./antd-DYfcSfab.js";const le=A({__name:"LoginForm",setup(b){const r=X,i=Y,u=$.Item,v=B.Password,{t:o}=W(),{notification:k,createErrorModal:m}=H(),{prefixCls:l}=Z("login"),f=j(),{setLoginState:_,getLoginState:D}=V(),{getFormRules:M}=q(),C=S(),x=S(!1),F=S(!1),g=N({account:"pany",password:"123456"}),{validForm:z}=K(C),I=O(()=>e(D)===p.LOGIN);function R(){return E(this,null,function*(){const w=yield z();if(w)try{x.value=!0;const a=yield f.login({password:w.password,username:w.account,mode:"none"});a&&k.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${a.realName}`,duration:3})}catch(a){m({title:o("sys.api.errorTip"),content:a.message||o("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${l}`)||document.body})}finally{x.value=!1}})}return(w,a)=>(P(),U(G,null,[L(s(Q,{class:"enter-x"},null,512),[[T,I.value]]),L(s(e($),{class:"p-4 enter-x",model:g,rules:e(M),ref_key:"formRef",ref:C,onKeypress:h(R,["enter"])},{default:t(()=>[s(e(u),{name:"account",class:"enter-x"},{default:t(()=>[s(e(B),{size:"large",value:g.account,"onUpdate:value":a[0]||(a[0]=n=>g.account=n),placeholder:e(o)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"password",class:"enter-x"},{default:t(()=>[s(e(v),{size:"large",visibilityToggle:"",value:g.password,"onUpdate:value":a[1]||(a[1]=n=>g.password=n),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(i),{class:"enter-x"},{default:t(()=>[s(e(r),{span:12},{default:t(()=>[s(e(u),null,{default:t(()=>[s(e(J),{checked:F.value,"onUpdate:checked":a[2]||(a[2]=n=>F.value=n),size:"small"},{default:t(()=>[d(c(e(o)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(r),{span:12},{default:t(()=>[s(e(u),{style:{"text-align":"right"}},{default:t(()=>[s(e(y),{type:"link",size:"small",onClick:a[3]||(a[3]=n=>e(_)(e(p).RESET_PASSWORD))},{default:t(()=>[d(c(e(o)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(u),{class:"enter-x"},{default:t(()=>[s(e(y),{type:"primary",size:"large",block:"",onClick:R,loading:x.value},{default:t(()=>[d(c(e(o)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),s(e(i),{class:"enter-x",gutter:[16,16]},{default:t(()=>[s(e(r),{md:8,xs:24},{default:t(()=>[s(e(y),{block:"",onClick:a[4]||(a[4]=n=>e(_)(e(p).MOBILE))},{default:t(()=>[d(c(e(o)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24},{default:t(()=>[s(e(y),{block:"",onClick:a[5]||(a[5]=n=>e(_)(e(p).QR_CODE))},{default:t(()=>[d(c(e(o)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24},{default:t(()=>[s(e(y),{block:"",onClick:a[6]||(a[6]=n=>e(_)(e(p).REGISTER))},{default:t(()=>[d(c(e(o)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),[[T,I.value]])],64))}});export{le as _};
